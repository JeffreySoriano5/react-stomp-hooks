(this["webpackJsonpreact-stomp-hooks-example"]=this["webpackJsonpreact-stomp-hooks-example"]||[]).push([[0],{102:function(e,t,n){e.exports=n(149)},103:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);n(103);var a=n(0),r=n.n(a),c=n(10),o=n.n(c),i=n(17),s=n(18),u=n(40),l=n(94),d=n(93),m=n(43),b=n(180),p=n(91),h=n.n(p),f=n(193);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var E=Object(a.createContext)(void 0);function g(e){var t=e.url,n=e.children,c=e.stompClientOptions,o=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["url","children","stompClientOptions"]);c&&(o=c);var i=Object(a.useState)(void 0),s=i[0],u=i[1],l=Object(a.useRef)(new Map);Object(a.useEffect)((function(){var e=new f.a(o);return o.brokerURL||o.webSocketFactory||(e.webSocketFactory=function(){var e,n,a=new URL(t,null===(e=window)||void 0===e||null===(n=e.location)||void 0===n?void 0:n.href);if("http:"===a.protocol||"https:"===a.protocol)return new h.a(t);if("ws:"===a.protocol||"wss:"===a.protocol)return new WebSocket(t);throw new Error("Protocol not supported")}),e.onConnect=function(t){o.onConnect&&o.onConnect(t),l.current.forEach((function(t){t.subscription=e.subscribe(t.destination,t.callback,t.headers)}))},o.onStompError||(e.onStompError=function(e){throw e}),e.activate(),u(e),function(){return e.deactivate()}}),[t].concat(Object.values(o)));return r.a.createElement(E.Provider,{value:{client:s,subscribe:function(e,t,n){void 0===n&&(n={});var a=Math.random().toString(36).substr(2,9),r={destination:e,callback:t,headers:n};return l.current.set(a,r),s&&s.connected&&(r.subscription=s.subscribe(e,t,n)),function(){var e=l.current.get(a);e.subscription&&e.subscription.unsubscribe(),l.current.delete(a)}}}},n)}function O(e,t,n){void 0===n&&(n={});var r=Object(a.useContext)(E),c=Object(a.useRef)(),o=Array.isArray(e)?e:[e];c.current=t,Object(a.useEffect)((function(){var e=[];return o.forEach((function(t){return e.push(r.subscribe(t,(function(e){c.current(e)}),n))})),function(){e.forEach((function(e){e()}))}}),[].concat(Object.values(o),Object.values(n)))}function j(){return Object(a.useContext)(E).client}var y=n(183),w=n(184),C=n(185),M=n(186),k=n(192),S=n(187),x=n(188),L=n(190),P=n(194),R=n(195),N=n(189),q=n(92),A=n.n(q);function F(){var e=Object(a.useState)("No message received yet"),t=Object(m.a)(e,2),n=t[0],c=t[1];return O("/topic/test",(function(e){return c(e.body)})),r.a.createElement(k.a,null,"Last Message: ",n)}function I(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)("No message received yet"),i=Object(m.a)(o,2),s=i[0],u=i[1],l=j();O("/user/queue/echoreply",(function(e){return u(e.body)}));return r.a.createElement(S.a,{container:!0,direction:"row",spacing:3},r.a.createElement(S.a,{item:!0},r.a.createElement(x.a,{variant:"contained",onClick:function(){l.publish({destination:"/app/echo",body:"Echo "+n})}},"Send Message")),r.a.createElement(S.a,{item:!0},r.a.createElement(L.a,{variant:"standard",value:n,onChange:function(e){return c(e.target.value)}})),r.a.createElement(S.a,{item:!0},r.a.createElement(M.a,{variant:"body1"},"Last Message received: ",s)))}var J,T,U,B=function(e){return function(t){var n=j();return r.a.createElement(e,v({stompClient:n},t))}}((J=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).stompClient=e.stompClient,a.state={input:"",lastMessage:"No message received yet"},a.handleChange=a.handleChange.bind(Object(u.a)(a)),a.sendMessage=a.sendMessage.bind(Object(u.a)(a)),a.onMessage=a.onMessage.bind(Object(u.a)(a)),a}return Object(s.a)(n,[{key:"onMessage",value:function(e){this.setState({lastMessage:e.body})}},{key:"sendMessage",value:function(){this.stompClient.publish({destination:"/app/echo",body:"Echo "+this.state.input})}},{key:"handleChange",value:function(e){this.setState({input:e.target.value})}},{key:"render",value:function(){return r.a.createElement(S.a,{container:!0,direction:"row",spacing:3},r.a.createElement(S.a,{item:!0},r.a.createElement(x.a,{variant:"contained",onClick:this.sendMessage},"Send Message")),r.a.createElement(S.a,{item:!0},r.a.createElement(L.a,{variant:"standard",value:this.state.input,onChange:this.handleChange})),r.a.createElement(S.a,{item:!0},r.a.createElement(M.a,{variant:"body1"},"Last Message received: ",this.state.lastMessage)))}}]),n}(r.a.Component),T="/user/queue/echoreply",void 0===U&&(U={}),function(e){var t=Object(a.useRef)();return O(T,(function(e){return t.current.onMessage(e)}),U),r.a.createElement(J,v({ref:t},e))}));function H(e){return r.a.createElement(P.a,{style:{margin:"3em"},TransitionProps:{unmountOnExit:!0}},r.a.createElement(R.a,{expandIcon:r.a.createElement(A.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(M.a,null,e.title)),r.a.createElement(N.a,null,e.children))}var W=function(){return r.a.createElement(g,{url:"https://stream.elite12.de/api/sock",debug:function(e){console.log(e)}},r.a.createElement(b.a,null),r.a.createElement(y.a,null,r.a.createElement(w.a,{style:{margin:"3em"},variant:"outlined"},r.a.createElement(C.a,null,r.a.createElement(M.a,null,"You can see the STOMP Messages send and received in the browser console"),r.a.createElement(M.a,null,"Note that, because the components are unmounted when the accordion is unexpanded, all subscriptions are removed when you close the accordion."))),r.a.createElement(H,{title:"Subscribing"},r.a.createElement(F,null)),r.a.createElement(H,{title:"Sending Messages"},r.a.createElement(I,null)),r.a.createElement(H,{title:"Higher Order Components"},r.a.createElement(B,null))))};o.a.render(r.a.createElement(W,null),document.getElementById("root"))}},[[102,1,2]]]);
//# sourceMappingURL=main.72082b72.chunk.js.map