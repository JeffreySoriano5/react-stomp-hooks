(this["webpackJsonpreact-stomp-hooks-example"]=this["webpackJsonpreact-stomp-hooks-example"]||[]).push([[0],{143:function(e,t,n){"use strict";n.r(t);n(97);var a=n(0),r=n.n(a),s=n(10),o=n.n(s),c=n(40),i=n(174),l=n(87),u=n.n(l),m=n(187),d=Object(a.createContext)(void 0);function p(e){var t=e.url,n=e.stompClientOptions,s=Object(a.useState)(void 0),o=s[0],c=s[1],i=Object(a.useRef)(new Map);Object(a.useEffect)((function(){var e=new m.a(n);return n.brokerURL||n.webSocketFactory||(e.webSocketFactory=function(){var e=new URL(t);if("http:"===e.protocol||"https:"===e.protocol)return new u.a(t);if("ws:"===e.protocol||"wss:"===e.protocol)return new WebSocket(t);throw new Error("Protocol not supported")}),e.onConnect=function(t){n.onConnect&&n.onConnect(t),i.current.forEach((function(t){t.subscription=e.subscribe(t.destination,t.callback,t.headers)}))},n.onStompError||(e.onStompError=function(e){throw e}),e.activate(),c(e),function(){return e.deactivate()}}),[t,n]);return r.a.createElement(d.Provider,{value:{client:o,subscribe:function(e,t,n){void 0===n&&(n={});var a=Math.random().toString(36).substr(2,9),r={destination:e,callback:t,headers:n};return i.current.set(a,r),o&&(r.subscription=o.subscribe(e,t,n)),function(){i.current.get(a).subscription.unsubscribe(),i.current.delete(a)}}}},e.children)}function h(e,t,n){void 0===n&&(n={});var r=Object(a.useContext)(d);Object(a.useEffect)((function(){return r.subscribe(e,t,n)}),[e])}function b(){return Object(a.useContext)(d).client}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var g=n(177),v=n(178),f=n(179),C=n(180),O=n(186),M=n(181),y=n(182),w=n(184),S=n(188),j=n(189),k=n(183),x=n(88),L=n.n(x);function P(){const e=Object(a.useState)("No message received yet"),t=Object(c.a)(e,2),n=t[0],s=t[1];return h("/topic/test",e=>s(e.body)),r.a.createElement(O.a,null,"Last Message: ",n)}function R(){const e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],s=t[1],o=Object(a.useState)("No message received yet"),i=Object(c.a)(o,2),l=i[0],u=i[1],m=b();h("/user/queue/echoreply",e=>u(e.body));return r.a.createElement(M.a,{container:!0,direction:"row",spacing:3},r.a.createElement(M.a,{item:!0},r.a.createElement(y.a,{variant:"contained",onClick:()=>{m.publish({destination:"/app/echo",body:"Echo "+n})}},"Send Message")),r.a.createElement(M.a,{item:!0},r.a.createElement(w.a,{variant:"standard",value:n,onChange:e=>s(e.target.value)})),r.a.createElement(M.a,{item:!0},r.a.createElement(C.a,{variant:"body1"},"Last Message received: ",l)))}const N=function(e){return function(t){var n=b();return r.a.createElement(e,E({stompClient:n},t))}}((q=class extends r.a.Component{constructor(e){super(e),this.stompClient=e.stompClient,this.state={input:"",lastMessage:"No message received yet"},this.handleChange=this.handleChange.bind(this),this.sendMessage=this.sendMessage.bind(this),this.onMessage=this.onMessage.bind(this)}onMessage(e){this.setState({lastMessage:e.body})}sendMessage(){this.stompClient.publish({destination:"/app/echo",body:"Echo "+this.state.input})}handleChange(e){this.setState({input:e.target.value})}render(){return r.a.createElement(M.a,{container:!0,direction:"row",spacing:3},r.a.createElement(M.a,{item:!0},r.a.createElement(y.a,{variant:"contained",onClick:this.sendMessage},"Send Message")),r.a.createElement(M.a,{item:!0},r.a.createElement(w.a,{variant:"standard",value:this.state.input,onChange:this.handleChange})),r.a.createElement(M.a,{item:!0},r.a.createElement(C.a,{variant:"body1"},"Last Message received: ",this.state.lastMessage)))}},F="/user/queue/echoreply",void 0===I&&(I={}),function(e){var t=Object(a.useRef)();return h(F,(function(e){return t.current.onMessage(e)}),I),r.a.createElement(q,E({ref:t},e))}));var q,F,I;function J(e){return r.a.createElement(S.a,{style:{margin:"3em"},TransitionProps:{unmountOnExit:!0}},r.a.createElement(j.a,{expandIcon:r.a.createElement(L.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(C.a,null,e.title)),r.a.createElement(k.a,null,e.children))}var T=()=>r.a.createElement(p,{url:"https://stream.elite12.de/api/sock",stompClientOptions:{debug:function(e){console.log(e)}}},r.a.createElement(i.a,null),r.a.createElement(g.a,null,r.a.createElement(v.a,{style:{margin:"3em"},variant:"outlined"},r.a.createElement(f.a,null,r.a.createElement(C.a,null,"You can see the STOMP Messages send and received in the browser console"))),r.a.createElement(J,{title:"Subscribing"},r.a.createElement(P,null)),r.a.createElement(J,{title:"Sending Messages"},r.a.createElement(R,null)),r.a.createElement(J,{title:"Higher Order Components"},r.a.createElement(N,null))));o.a.render(r.a.createElement(T,null),document.getElementById("root"))},96:function(e,t,n){e.exports=n(143)},97:function(e,t,n){}},[[96,1,2]]]);
//# sourceMappingURL=main.4fee9f24.chunk.js.map