(this["webpackJsonpreact-stomp-hooks-example"]=this["webpackJsonpreact-stomp-hooks-example"]||[]).push([[0],{143:function(e,t,n){"use strict";n.r(t);n(97);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),s=n(40),i=n(174),l=n(87),u=n.n(l),d=n(187);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var m=Object(a.createContext)(void 0);function p(e){var t=e.url,n=e.children,o=e.stompClientOptions,c=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["url","children","stompClientOptions"]);o&&(c=o);var s=Object(a.useState)(void 0),i=s[0],l=s[1],h=Object(a.useRef)(new Map);Object(a.useEffect)((function(){var e=new d.a(c);return c.brokerURL||c.webSocketFactory||(e.webSocketFactory=function(){var e,n,a=new URL(t,null===(e=window)||void 0===e||null===(n=e.location)||void 0===n?void 0:n.href);if("http:"===a.protocol||"https:"===a.protocol)return new u.a(t);if("ws:"===a.protocol||"wss:"===a.protocol)return new WebSocket(t);throw new Error("Protocol not supported")}),e.onConnect=function(t){c.onConnect&&c.onConnect(t),h.current.forEach((function(t){t.subscription=e.subscribe(t.destination,t.callback,t.headers)}))},c.onStompError||(e.onStompError=function(e){throw e}),e.activate(),l(e),function(){return e.deactivate()}}),[t].concat(Object.values(c)));return r.a.createElement(m.Provider,{value:{client:i,subscribe:function(e,t,n){void 0===n&&(n={});var a=Math.random().toString(36).substr(2,9),r={destination:e,callback:t,headers:n};return h.current.set(a,r),i&&i.connected&&(r.subscription=i.subscribe(e,t,n)),function(){var e=h.current.get(a);e.subscription&&e.subscription.unsubscribe(),h.current.delete(a)}}}},n)}function b(e,t,n){void 0===n&&(n={});var r=Object(a.useContext)(m),o=Object(a.useRef)(),c=Array.isArray(e)?e:[e];o.current=t,Object(a.useEffect)((function(){var e=[];return c.forEach((function(t){return e.push(r.subscribe(t,(function(e){o.current(e)}),n))})),function(){e.forEach((function(e){e()}))}}),[].concat(Object.values(c),Object.values(n)))}function v(){return Object(a.useContext)(m).client}var E=n(177),f=n(178),g=n(179),O=n(180),y=n(186),w=n(181),C=n(182),j=n(184),M=n(188),S=n(189),k=n(183),x=n(88),L=n.n(x);function P(){const e=Object(a.useState)("No message received yet"),t=Object(s.a)(e,2),n=t[0],o=t[1];return b("/topic/test",e=>o(e.body)),r.a.createElement(y.a,null,"Last Message: ",n)}function R(){const e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)("No message received yet"),i=Object(s.a)(c,2),l=i[0],u=i[1],d=v();b("/user/queue/echoreply",e=>u(e.body));return r.a.createElement(w.a,{container:!0,direction:"row",spacing:3},r.a.createElement(w.a,{item:!0},r.a.createElement(C.a,{variant:"contained",onClick:()=>{d.publish({destination:"/app/echo",body:"Echo "+n})}},"Send Message")),r.a.createElement(w.a,{item:!0},r.a.createElement(j.a,{variant:"standard",value:n,onChange:e=>o(e.target.value)})),r.a.createElement(w.a,{item:!0},r.a.createElement(O.a,{variant:"body1"},"Last Message received: ",l)))}const N=function(e){return function(t){var n=v();return r.a.createElement(e,h({stompClient:n},t))}}((q=class extends r.a.Component{constructor(e){super(e),this.stompClient=e.stompClient,this.state={input:"",lastMessage:"No message received yet"},this.handleChange=this.handleChange.bind(this),this.sendMessage=this.sendMessage.bind(this),this.onMessage=this.onMessage.bind(this)}onMessage(e){this.setState({lastMessage:e.body})}sendMessage(){this.stompClient.publish({destination:"/app/echo",body:"Echo "+this.state.input})}handleChange(e){this.setState({input:e.target.value})}render(){return r.a.createElement(w.a,{container:!0,direction:"row",spacing:3},r.a.createElement(w.a,{item:!0},r.a.createElement(C.a,{variant:"contained",onClick:this.sendMessage},"Send Message")),r.a.createElement(w.a,{item:!0},r.a.createElement(j.a,{variant:"standard",value:this.state.input,onChange:this.handleChange})),r.a.createElement(w.a,{item:!0},r.a.createElement(O.a,{variant:"body1"},"Last Message received: ",this.state.lastMessage)))}},A="/user/queue/echoreply",void 0===F&&(F={}),function(e){var t=Object(a.useRef)();return b(A,(function(e){return t.current.onMessage(e)}),F),r.a.createElement(q,h({ref:t},e))}));var q,A,F;function I(e){return r.a.createElement(M.a,{style:{margin:"3em"},TransitionProps:{unmountOnExit:!0}},r.a.createElement(S.a,{expandIcon:r.a.createElement(L.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(O.a,null,e.title)),r.a.createElement(k.a,null,e.children))}var J=()=>r.a.createElement(p,{url:"https://stream.elite12.de/api/sock",debug:e=>{console.log(e)}},r.a.createElement(i.a,null),r.a.createElement(E.a,null,r.a.createElement(f.a,{style:{margin:"3em"},variant:"outlined"},r.a.createElement(g.a,null,r.a.createElement(O.a,null,"You can see the STOMP Messages send and received in the browser console"),r.a.createElement(O.a,null,"Note that, because the components are unmounted when the accordion is unexpanded, all subscriptions are removed when you close the accordion."))),r.a.createElement(I,{title:"Subscribing"},r.a.createElement(P,null)),r.a.createElement(I,{title:"Sending Messages"},r.a.createElement(R,null)),r.a.createElement(I,{title:"Higher Order Components"},r.a.createElement(N,null))));c.a.render(r.a.createElement(J,null),document.getElementById("root"))},96:function(e,t,n){e.exports=n(143)},97:function(e,t,n){}},[[96,1,2]]]);
//# sourceMappingURL=main.42f688e4.chunk.js.map